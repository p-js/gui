var GUI=function(a){function b(a){this.options=e.defaults(a||{},i),this.render(this.options)}var c=a("Handlebars"),d=a("$"),e=a("_"),f=a("Backbone"),g=function(){return this.Templates=this.Templates||{},this.Templates["src/ad-display/template.html"]=c.template(function(a,b,c,d,e){function f(a,b){var d,e="";return e+='\n	    <a class="mtvn-ad-gui-learn-more" href="',(d=c.buttonLink)?d=d.call(a,{hash:{},data:b}):(d=a.buttonLink,d=typeof d===i?d.apply(a):d),e+=j(d)+'" target="',(d=c.buttonTarget)?d=d.call(a,{hash:{},data:b}):(d=a.buttonTarget,d=typeof d===i?d.apply(a):d),e+=j(d)+'">\n	    	',(d=c.buttonText)?d=d.call(a,{hash:{},data:b}):(d=a.buttonText,d=typeof d===i?d.apply(a):d),e+=j(d)+"\n	    </a>\n	    "}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var g,h="",i="function",j=this.escapeExpression,k=this;return h+='<div class="mtvn-ad-gui">\n	<div class="mtvn-ad-gui-container">\n	    <span class="mtvn-ad-gui-countdown"></span>\n	    ',g=c["if"].call(b,b.buttonLink,{hash:{},inverse:k.noop,fn:k.program(1,f,e),data:e}),(g||0===g)&&(h+=g),h+="\n	</div>\n</div>"}),this.Templates["src/controls/template.html"]=c.template(function(a,b,c,d,e){function f(){return'\n<div class="mtvn-controls-live mtvn-controls-button"></div>\n'}function g(){return'\n<div class="mtvn-controls-play-pause mtvn-controls-button"></div>\n'}function h(){return'\n<div class="mtvn-controls-cc mtvn-controls-button"></div>\n'}function i(){return'\n<div class="mtvn-controls-volume mtvn-controls-button"></div>\n'}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var j,k="",l=this,m="function",n=this.escapeExpression;return k+="<!-- controls -->\n",j=c["if"].call(b,b.live,{hash:{},inverse:l.program(3,g,e),fn:l.program(1,f,e),data:e}),(j||0===j)&&(k+=j),k+='\n<div class="',(j=c.slider)?j=j.call(b,{hash:{},data:e}):(j=b.slider,j=typeof j===m?j.apply(b):j),k+=n(j)+'">\n	<div class="',(j=c.slider)?j=j.call(b,{hash:{},data:e}):(j=b.slider,j=typeof j===m?j.apply(b):j),k+=n(j)+'-time-display"></div>\n	<div class="',(j=c.slider)?j=j.call(b,{hash:{},data:e}):(j=b.slider,j=typeof j===m?j.apply(b):j),k+=n(j)+'-progress-container">\n		<div class="',(j=c.slider)?j=j.call(b,{hash:{},data:e}):(j=b.slider,j=typeof j===m?j.apply(b):j),k+=n(j)+'-buffered"></div>\n		<div class="',(j=c.slider)?j=j.call(b,{hash:{},data:e}):(j=b.slider,j=typeof j===m?j.apply(b):j),k+=n(j)+'-progress"></div>\n	</div>\n	<div class="',(j=c.slider)?j=j.call(b,{hash:{},data:e}):(j=b.slider,j=typeof j===m?j.apply(b):j),k+=n(j)+'-background"></div>\n	<div class="',(j=c.slider)?j=j.call(b,{hash:{},data:e}):(j=b.slider,j=typeof j===m?j.apply(b):j),k+=n(j)+'-segment-container"></div>\n	<div class="',(j=c.slider)?j=j.call(b,{hash:{},data:e}):(j=b.slider,j=typeof j===m?j.apply(b):j),k+=n(j)+'-thumb-container" style="left:0px;">\n		<div class="',(j=c.slider)?j=j.call(b,{hash:{},data:e}):(j=b.slider,j=typeof j===m?j.apply(b):j),k+=n(j)+'-tool-tip-container">\n			<div class="',(j=c.slider)?j=j.call(b,{hash:{},data:e}):(j=b.slider,j=typeof j===m?j.apply(b):j),k+=n(j)+'-tool-tip-background"></div>\n			<div class="',(j=c.slider)?j=j.call(b,{hash:{},data:e}):(j=b.slider,j=typeof j===m?j.apply(b):j),k+=n(j)+'-tool-tip-time"></div>\n		</div>\n		<div class="',(j=c.slider)?j=j.call(b,{hash:{},data:e}):(j=b.slider,j=typeof j===m?j.apply(b):j),k+=n(j)+'-thumb"/>\n	</div>\n</div>\n',j=c["if"].call(b,b.ccEnabled,{hash:{},inverse:l.noop,fn:l.program(5,h,e),data:e}),(j||0===j)&&(k+=j),k+="\n",j=c["if"].call(b,b.showVolume,{hash:{},inverse:l.noop,fn:l.program(7,i,e),data:e}),(j||0===j)&&(k+=j),k+='\n<div class="mtvn-controls-fullscreen mtvn-controls-button"></div>'}),this.Templates["src/top-panel/top-panel.html"]=c.template(function(a,b,c,d,e){function f(a){var b="";return b+='\n	<div class="mtvn-tp-share-divider"></div>\n	<div class="mtvn-tp-share-item mtvn-tp-'+k(typeof a===j?a.apply(a):a)+'" data-share-id="'+k(typeof a===j?a.apply(a):a)+'"></div>\n	'}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var g,h,i="",j="function",k=this.escapeExpression,l=this,m=c.blockHelperMissing;return i+='<div class="mtvn-tp-container">\n	<span class="mtvn-tp-metadata">',(g=c.metadata)?g=g.call(b,{hash:{},data:e}):(g=b.metadata,g=typeof g===j?g.apply(b):g),i+=k(g)+'</span>\n	<div class="mtvn-tp-share">\n	',h={hash:{},inverse:l.noop,fn:l.program(1,f,e),data:e},(g=c.share)?g=g.call(b,h):(g=b.share,g=typeof g===j?g.apply(b):g),c.share||(g=m.call(b,g,h)),(g||0===g)&&(i+=g),i+="\n	</div>\n</div>"}),this.Templates}.apply({}),h=g["src/ad-display/template.html"],i={countdownText:"Your content will resume in {{time}}.",messageText:"Your content will resume shortly.",buttonText:"Learn More",buttonTarget:"_blank"};b.prototype={render:function(a){var b=a.template||h,c=this.$el=d(b(a));return this.$countdown=c.find(".mtvn-ad-gui-countdown"),this.renderMessage(a.time),c},renderMessage:function(a){var b=this.options[e.isUndefined(a)?"messageText":"countdownText"],c=e.template(b,{time:a},{interpolate:/\{\{(.+?)\}\}/g});this.$countdown.text(c)}};var j={availableShareItems:["facebook","twitter","email"],validate:function(a){return a.share&&(a.share=e.intersection(a.share,j.availableShareItems)),a}},k=f.View.extend({template:g["src/top-panel/top-panel.html"],tagName:"div",className:"mtvn-tp",events:{"click .mtvn-tp-share":"onShare"},initialize:function(a){this.options=j.validate(a),this.render()},render:function(){this.$el.html(d(this.template(this.options)))},onShare:function(a){this.trigger(k.Events.SHARE,d(a.target).data("share-id"))}},{Events:{SHARE:"share"}}),l=function(){var a="ontouchstart"in window||"onmsgesturechange"in window;return{isTouchDevice:a,getClientX:a?function(a){return a.originalEvent.touches[0].clientX}:function(a){return a.clientX},getClientY:a?function(a){return a.originalEvent.touches[0].clientY}:function(a){return a.clientY},invokeIfNumber:function(a,b){isNaN(b)&&parseFloat(b,10),isNaN(b)||(console.log("INVOKE~~~ util.js:21 n",b),a(b))},formatTime:function(a){if(isNaN(a))return"00:00";var b=Math.floor(a/3600),c=Math.floor(a%3600/60),d=Math.floor(a%3600%60);return(0===b?"":10>b?"0"+b+":":b+":")+(10>c?"0"+c:c)+":"+(10>d?"0"+d:d)}}}(),m=function(){return f.View.extend({ccEnabled:!1,className:"mtvn-controls-cc",events:{click:"toggle"},toggle:function(){this.trigger(o.CC,{type:o.CC})}})}(),n=function(){var a=g["src/controls/template.html"],b={slider:"mtvn-controls-slider",playPause:"mtvn-controls-play-pause",volume:"mtvn-controls-volume",cc:"mtvn-controls-cc"};return f.View.extend({tagName:"div",className:"mtvn-controls",events:{"click .mtvn-controls-fullscreen":"onFullscreen"},initialize:function(a){this.options=a,e.bindAll(this,"sendEvent"),e.extend(this.options,{slider:b.slider}),this.render()},render:function(){var c=this.options;this.$el.html(d(a(c))),this.playPauseButton=new p({el:this.$el.find("."+b.playPause),paused:c.paused}),this.listenTo(this.playPauseButton,o.PLAY,this.sendEvent),this.listenTo(this.playPauseButton,o.PAUSE,this.sendEvent),this.slider=new q({el:this.$el.find("."+b.slider),playhead:c.playhead,durations:c.durations}),this.listenTo(this.slider,o.SEEK,this.sendEvent),this.volumeButton=new r({volume:c.volume,el:this.$el.find("."+b.volume)}),this.listenTo(this.volumeButton,o.MUTE,this.sendEvent),this.listenTo(this.volumeButton,o.UNMUTE,this.sendEvent),this.closedCaptionButton=new m({ccEnabled:c.ccEnabled,el:this.$el.find("."+b.cc)}),this.listenTo(this.closedCaptionButton,o.CC,this.sendEvent)},setVolume:function(a){this.volumeButton.setVolume(a)},setPaused:function(a){this.playPauseButton.setPaused(a)},getPlayhead:function(){return this.slider.playhead},setPlayhead:function(a){this.slider.setPlayhead(a)},setBuffered:function(a){this.slider.setBuffered(a)},setDurations:function(a){this.slider.setDurations(a)},sendEvent:function(a){a.target=this,this.trigger(a.type,a)},onFullscreen:function(){this.sendEvent({type:o.FULLSCREEN})}})}(),o={PLAY:"PLAY",PAUSE:"PAUSE",FULLSCREEN:"FULLSCREEN",CC:"CC",MUTE:"MUTE",VOLUME:"VOLUME",UNMUTE:"UNMUTE",SEEK:"SEEK"},p=function(){var a={play:"mtvn-controls-play",pause:"mtvn-controls-pause"};return f.View.extend({initialize:function(b){this.options=b,this.$el.addClass(this.options.paused?a.play:a.pause)},events:{click:"toggle"},setPaused:function(b){var c=this.$el;c.toggleClass(a.play,b),c.toggleClass(a.pause,!b)},toggle:function(){var b=this.$el,c=b.hasClass(a.pause),d=c?o.PAUSE:o.PLAY;b.toggleClass(a.play,c),b.toggleClass(a.pause,!c),this.trigger(d,{type:d})}})}(),q=function(){var a="slider:resize",b="mtvn-controls-slider-thumb",c="mtvn-controls-slider-thumb-active",g={platformInitialize:function(){},events:{"touchstart .mtvn-controls-slider-thumb-container":"onThumbActive","touchmove .mtvn-controls-slider-thumb-container":"onThumbMove","touchend .mtvn-controls-slider-thumb-container":"onThumbInactive"}},h={platformInitialize:function(){e.bindAll(this,"onThumbMove","onThumbInactive");var a=d(document);this.listenTo(a,"mousemove",this.onThumbMove),this.listenTo(a,"mouseup",this.onThumbInactive)},events:{"mousedown .mtvn-controls-slider-thumb-container":"onThumbActive"}},i=function(){return{isSegmented:!0,createDividers:function(){this.$dividerContainer.empty(),e.each(this.durations,function(){this.$dividerContainer.append(d('<div class="mtvn-controls-slider-segment"/>'))},this)},moveDividers:function(){var a=this.$dividerContainer.children();e.each(this.durations,function(b,c){d(a[c]).css({left:this.getLeftFromPlayhead(b)})},this)}}}();return f.View.extend({dragging:!1,duration:0,playhead:0,sliderWidth:0,initialize:function(a){this.options=a,e.extend(this,l.isTouchDevice?g:h),this.platformInitialize(),this.render(),this.$thumbContainer=this.$el.find(".mtvn-controls-slider-thumb-container"),this.$progress=this.$el.find(".mtvn-controls-slider-progress"),this.$buffered=this.$el.find(".mtvn-controls-slider-buffered"),this.$timeDisplay=this.$el.find(".mtvn-controls-slider-time-display"),this.$toolTipContainer=this.$el.find(".mtvn-controls-slider-tool-tip-container"),this.$toolTipContainer.hide(),this.$toolTipTime=this.$el.find(".mtvn-controls-slider-tool-tip-time"),this.$dividerContainer=this.$el.find(".mtvn-controls-slider-segment-container"),this.throttledMeasure=e.throttle(this.measure,1500),this.setDurations(this.options.durations),this.setPlayhead(this.options.playhead)},setPlayhead:function(a){this.dragging||this.seeking||(isNaN(a)&&(a=parseFloat(a,10)),isNaN(a)||(this.throttledMeasure(),this.playhead=Math.max(0,Math.min(a,this.duration)),this.moveThumb(this.getLeftFromPlayhead(a)),this.updateTime()))},setBuffered:function(a){if(!this.dragging&&!this.seeking&&this.duration>1){var b=Math.max(0,this.getLeftFromPlayhead(a));this.throttledMeasure(),b=Math.min(b,this.sliderWidth),this.$buffered.css({width:b})}},measure:function(){var b=this.$el[0].offsetWidth;b!==this.sliderWidth&&(this.sliderWidth=b,this.trigger(a,b))},setDurations:function(b){if(e.isArray(b)){b.length>1&&!this.isSegmented&&e.extend(this,i);var c=0;this.durations=e.map(b,function(a){return c+=a}),this.duration=this.durations.pop(),this.throttledMeasure(),this.isSegmented?(this.createDividers(),this.moveDividers(),this.$dividerContainer.show(),this.on(a,e.bind(this.moveDividers,this))):this.$dividerContainer.hide(),this.updateTime()}},setEnabled:function(a){a!==this.enabled&&(a?(this.$thumbContainer.show(),this.$timeDisplay.css({visibility:"visible"}),this.$buffered.show(),this.$progress.show()):(this.$thumbContainer.hide(),this.$timeDisplay.css({visibility:"hidden"}),this.$progress.hide(),this.$buffered.hide())),this.enabled=a},onThumbActive:function(a){a.preventDefault();var d=this.$el.find("."+b);d.removeClass(b),d.addClass(c),this.dragging=!0,this.throttledMeasure(),this.$buffered.css({width:0}),this.$toolTipTime.html(l.formatTime(this.playhead)),this.$toolTipContainer.show()},onThumbMove:function(a){if(this.dragging){a.preventDefault();var b=l.getClientX(a);this.containerOffset||(this.containerOffset=this.$el.offset().left),this.moveThumb(b-this.containerOffset)}},onThumbInactive:function(a){if(this.dragging){a.preventDefault();var d=this.$el.find("."+c);d.removeClass(c),d.addClass(b),this.dragging=!1,this.sendSeek(),this.$toolTipContainer.hide()}},moveThumb:function(a){var b=Math.max(0,a);b=Math.min(b,this.sliderWidth),this.$thumbContainer.css({left:b}),this.$progress.css({width:b}),this.$toolTipTime.html(l.formatTime(this.getTimeFromThumb(b)))},getLeftFromPlayhead:function(a){if(!a)return 0;var b=a/Math.max(1,this.duration);return b*this.sliderWidth},getTimeFromThumb:function(a){isNaN(a)&&(a=parseFloat(this.$thumbContainer.css("left"),10));var b=a/this.sliderWidth;return b*this.duration},updateTime:function(){this.$timeDisplay.html(this.getTimeDisplayText())},getTimeDisplayText:function(){return'<span class="mtvn-controls-slider-current-time">'+l.formatTime(this.playhead)+"</span> / "+l.formatTime(this.duration)},sendSeek:function(){var a=this.playhead=this.getTimeFromThumb();this.updateTime(),this.trigger(o.SEEK,{type:o.SEEK,data:a})}})}(),r=function(){var a={unmute:"mtvn-controls-unmute",mute:"mtvn-controls-mute"};return f.View.extend({events:{click:"toggle"},initialize:function(a){this.options=a,this.setVolume(isNaN(this.options.volume)?1:this.options.volume)},setVolume:function(b){var c=b>0;this.$el.toggleClass(a.mute,c),this.$el.toggleClass(a.unmute,!c)},toggle:function(){var b=this.$el,c=b.hasClass(a.unmute),d=c?o.UNMUTE:o.MUTE;b.toggleClass(a.mute,c),b.toggleClass(a.unmute,!c),this.trigger(d,{type:d})}})}();return{AdDisplay:b,Controls:n,TopPanel:k,Events:o,version:"0.6.0",build:"01/13/2014 01:36:03 PM"}}(MTVNPlayer.require);