{"version":3,"file":"mtvn.min.js","sources":["mtvn.js"],"names":["root","factory","MTVNPlayer","require","provide","apply","arguments","this","_","$","Handlebars","Backbone","GUI","version","build","Templates","template","1","depth0","helpers","partials","data","helper","functionType","helperMissing","escapeExpression","buttonLink","call","name","hash","buttonTarget","buttonText","compiler","main","stack1","buffer","fn","program","inverse","noop","useData","3","5","7","isDVR","isLive","slider","ccEnabled","showVolume","lambda","options","blockHelperMissing","metadata","share","AdDisplay","View","extend","tagName","className","events","LEARN_MORE_EVENT_ONLY","click .mtvn-ad-gui-learn-more","touchstart .mtvn-ad-gui-learn-more","initialize","render","defaults","DEFAULT_COPY","$el","html","delegateEvents","$countdown","renderMessage","time","messageTempate","getTemplate","countdown","interpolate","text","messageText","countdownText","index","total","countdownTextWithPosition","onLearnMore","event","preventDefault","trigger","Events","LEARN_MORE","TopPanelModel","availableShareItems","validate","intersection","TopPanel","click .mtvn-tp-share","touchstart .mtvn-tp-share","setMetadata","hide","addClass","show","removeClass","onShare","SHARE","target","ClosedCaptionButton","click","touchstart","toggle","CC","type","Controls","Slider","RESIZE","thumb","thumbActive","formatTime","sec","isNaN","h","Math","floor","m","s","SliderDVRMixin","_isLive","IS_LIVE_THRESHOLD","checkLive","IS_LIVE","duration","playhead","SegmentedSlider","isSegmented","createDividers","$dividerContainer","empty","each","durations","append","moveDividers","dividers","children","css","left","getLeftFromPlayhead","enabled","dragging","sliderWidth","touchstart .mtvn-controls-slider-thumb-container","touchmove .mtvn-controls-slider-thumb-container","touchend .mtvn-controls-slider-thumb-container","mousedown .mtvn-controls-slider-thumb-container","bindAll","$document","document","listenTo","onThumbMove","onThumbInactive","$thumbContainer","$progress","$buffered","$timeDisplay","$toolTipContainer","$toolTipTime","throttledMeasure","throttle","measure","throttledRender","setDurations","setPlayhead","setEnabled","seeking","parseFloat","round","max","min","isArray","length","currentDuration","map","num","pop","on","bind","moveThumb","updateTime","setBuffered","buffered","width","offsetWidth","visibility","onSliderClick","hasClass","moveTo","pageX","containerOffset","offset","sendSeek","onThumbActive","abs","lastLeft","getTimeFromThumb","percent","thumbLeft","p","getTimeDisplayText","SEEK","CONTROLS_TEMPLATE","playPause","live","volume","cc","addEvents","listener","dispatcher","cb","eventName","click .mtvn-controls-fullscreen","touchstart .mtvn-controls-fullscreen","click .mtvn-controls-rewind","touchstart .mtvn-controls-rewind","playPauseButton","PlayPauseButton","el","paused","PLAY","PAUSE","sendEvent","liveButton","LiveButton","GO_LIVE","onLiveChange","volumeButton","VolumeButton","muted","showVolumeSlider","VOLUME","MUTE","UNMUTE","closedCaptionButton","setVolume","setPaused","getPlayhead","onRewind","REWIND","onFullscreen","FULLSCREEN","golive","setLive","toggleClass","play","pause","isPaused","showPlay","controls","unmute","mute","showSlider","isButton","$target","defaultEvents","mouseEvents","click .mtvn-controls-volume-slider","touchstart .mtvn-controls-volume-slider","mouseover","mouseleave","mousedown .mtvn-controls-volume-slider-foreground","touchstart .mtvn-controls-volume-slider-foreground","$doc","$slider","$container","parent","$thumb","isMuted","delay","updateView","getElementOffset","elOffset","onMouseOut","isMouseOver","offsetX","isUndefined","isLeftOrRight","$toEl","toElement","relatedTarget","toggleTime","toggleSlider","onMouseOver","calculatePercentageFromTop","pageY","getContainerOffset","currentVolume","top","calculateSliderValueFromPercentage","getVolumeHeight","showMute","volumeHeight","percentage","height","newVol"],"mappings":"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"}